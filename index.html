<!DOCTYPE html>
<html lang="es-AR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TITAN CORE | IAcore Cloud</title>
    <style>
        :root { 
            --accent: #00f2ff; --data: #00ff41; --text: #f0f0f0;
            --panel: rgba(10, 12, 16, 0.96); --gold: #ffcc00; --danger: #ff3333;
        }
        body { 
            background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), 
                        url('https://images.unsplash.com') no-repeat center center fixed;
            background-size: cover; color: var(--text); font-family: 'Consolas', monospace; 
            margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding: 10px; box-sizing: border-box;
        }

        /* EFECTO FLASH AL RECIBIR ENERG√çA */
        #flash-effect { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--accent); opacity: 0; z-index: 20000; pointer-events: none; transition: opacity 0.1s; }

        /* MANIFIESTO PAPIRO */
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px; box-sizing: border-box; }
        .paper { background-color: #e4d5b7; background-image: url("https://www.transparenttextures.com"); color: #8b0000; padding: 40px 25px 25px 25px; max-width: 480px; width: 100%; border-radius: 2px; position: relative; box-shadow: 0 0 40px rgba(0,0,0,0.9); font-family: 'Times New Roman', Times, serif; line-height: 1.4; border: 1px solid #c2b280; max-height: 90vh; overflow-y: auto; }
        .close-btn { position: absolute; top: 10px; right: 15px; font-size: 24px; font-weight: bold; cursor: pointer; color: #630000; opacity: 0.8; font-family: sans-serif; }
        .paper h2 { text-align: center; border-bottom: 1px dashed #8b0000; padding-bottom: 10px; margin-top: 0; letter-spacing: 2px; font-size: 1.4rem; }
        .paper p { text-align: left; font-size: 1rem; margin-bottom: 12px; font-weight: 600; }
        .highlight { border-bottom: 1px solid #8b0000; }

        /* DASHBOARD TITAN */
        .main-title { letter-spacing: 12px; text-align: center; margin: 40px 0 10px 0; font-size: 2.2rem; color: #fff; text-transform: uppercase; font-weight: 900; text-shadow: 0 5px 10px rgba(0,0,0,0.5); }
        #gear { font-size: 70px; margin: 10px; }
        .spinning { animation: gearRotate 1s linear infinite; }
        @keyframes gearRotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .dashboard { background: var(--panel); border: 1px solid #333; padding: 20px; width: 90%; max-width: 450px; border-radius: 8px; margin-bottom: 15px; text-align: center; }
        .label-donors { font-size: 0.7rem; color: var(--gold); letter-spacing: 2px; text-transform: uppercase; margin-bottom: 5px; }
        #supply-count { font-size: 3rem; font-weight: bold; font-variant-numeric: tabular-nums; }
        
        .temp-bar-bg { width: 100%; height: 12px; background: #000; border-radius: 4px; border: 1px solid #444; margin: 15px 0; overflow: hidden; position: relative; }
        #temp-fill { width: 0%; height: 100%; background: var(--accent); transition: width 0.8s ease-in-out; }
        #temp-percent { position: absolute; width: 100%; text-align: center; font-size: 0.65rem; line-height: 12px; color: #fff; font-weight: bold; top: 0; left: 0; text-shadow: 1px 1px 2px #000; }

        /* IA INTERFACE */
        .ai-interface { width: 95%; max-width: 450px; display: flex; flex-direction: column; gap: 8px; position: relative; }
        .chat-core { background: rgba(5, 5, 5, 0.98); border: 1px solid #333; padding: 15px; height: 140px; overflow-y: auto; border-radius: 4px; border-left: 2px solid var(--accent); }
        #chat-window { color: var(--accent); font-size: 0.9rem; line-height: 1.4; white-space: pre-wrap; font-weight: bold; }
        #ai-in { width: 100%; background: #000; border: 1px solid #333; color: white; padding: 15px; outline: none; font-family: monospace; box-sizing: border-box; }
        #voice-toggle { position: absolute; right: 12px; top: 12px; background: transparent; border: none; color: var(--accent); font-size: 1.4rem; cursor: pointer; }

        /* PAQUETES DE INSTALACI√ìN */
        .core-installer { width: 95%; max-width: 450px; background: #0a0c10; border: 1px solid #333; padding: 20px; border-radius: 8px; margin-top: 20px; text-align: center; }
        .dl-btn { display: flex; align-items: center; justify-content: space-between; padding: 12px; border-radius: 4px; text-decoration: none; font-weight: bold; font-size: 0.75rem; border: 1px solid transparent; margin-bottom: 8px; transition: 0.3s; }
        .dl-android { color: var(--data); border-color: rgba(0, 255, 65, 0.3); background: rgba(0, 255, 65, 0.05); }
        .dl-windows { color: var(--gold); border-color: rgba(255, 204, 0, 0.3); background: rgba(255, 204, 0, 0.05); }
        .dl-linux { color: var(--danger); border-color: rgba(255, 51, 51, 0.3); background: rgba(255, 51, 51, 0.05); }
        .dl-btn:hover { background: rgba(255, 255, 255, 0.1); }

        /* DONACIONES */
        .donation-box { text-align: center; margin: 30px 0; max-width: 450px; width: 90%; }
        .pay-link { color: var(--gold); text-decoration: none; font-size: 0.8rem; border: 1px solid var(--gold); padding: 12px 20px; font-weight: bold; background: rgba(255, 204, 0, 0.05); display: inline-block; transition: 0.3s; margin: 5px; min-width: 140px; }
        .btn-ignite { background: var(--accent); color: #000; border: none; padding: 18px 60px; font-weight: 900; cursor: pointer; margin: 10px 0; clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%); }
    </style>
</head>
<body>
    <div id="flash-effect"></div>
    
    <div id="overlay">
        <div class="paper">
            <span class="close-btn" onclick="closeManifesto()">‚úï</span>
            <h2>TITAN CORE</h2>
            <p><span class="highlight">El Cambio de Identidad: De "Consumidor" a "Sintonizador"</span></p>
            <p>Mientras que los poderosos venden "Potencia" (choque fuerte), Titan Core ofrece "Sincron√≠a" (orden perfecto).</p>
            <p>A trav√©s de un sistema ontol√≥gico de software ordenado adiab√°ticamente, logramos estabilizar la resonancia de fase.</p>
            <p>Bienvenido a la soberan√≠a de tu hogar...</p>
        </div>
    </div>

    <h1 class="main-title">TITAN CORE</h1>
    <div id="gear">‚öôÔ∏è</div>
    
    <div class="dashboard">
        <div class="label-donors">Cantidad de donantes registrados</div>
        <div id="supply-count">000000</div>
        <div class="temp-bar-bg">
            <div id="temp-fill"></div>
            <div id="temp-percent">POTENCIA: 0%</div>
        </div>
    </div>

    <button class="btn-ignite" onclick="igniteEngine()">IGNICI√ìN</button>
    
    <div class="ai-interface">
        <button id="voice-toggle" onclick="toggleAudio()">üîä</button>
        <div class="chat-core">
            <div id="chat-window">> IAcore ONLINE.</div>
        </div>
        <input type="text" id="ai-in" placeholder="Comando..." onkeydown="if(event.key==='Enter') aiProcess(this.value)">
    </div>

    <div class="core-installer">
        <div style="font-size: 0.7rem; color: #666; margin-bottom: 15px;">PAQUETES DE INSTALACI√ìN</div>
        <a href="#" class="dl-btn dl-android"><span>ANDROID CORE</span> <span>‚ñº APK</span></a>
        <a href="#" class="dl-btn dl-windows"><span>WINDOWS SINTONY</span> <span>‚ñº EXE</span></a>
        <a href="#" class="dl-btn dl-linux"><span>LINUX ADIABATIC</span> <span>‚ñº DEB</span></a>
    </div>

    <div class="donation-box">
        <p style="font-size:0.85rem; margin-bottom:15px; line-height:1.4;">Dona un poco de nafta para que el motor siga girando en cada casa...üè°</p>
        <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
            <a href="https://link.mercadopago.com.ar" target="_blank" class="pay-link" onclick="simulateDonation()">MERCADO PAGO AR</a>
            <a href="https://paypal.me" target="_blank" class="pay-link" style="color:#0070ba; border-color:#0070ba;" onclick="simulateDonation()">PAYPAL GLOBAL</a>
        </div>
    </div>

    <!-- FIREBASE CLOUD SYNC -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com";
        import { getDatabase, ref, onValue, runTransaction } from "https://www.gstatic.com";

        const firebaseConfig = {
            apiKey: "AIzaSyBecvFGKjohZKqnO42AvrP3gVJgzSjo30I",
            authDomain: "titancore-87eeb.firebaseapp.com",
            databaseURL: "https://titancore-87eeb-default-rtdb.firebaseio.com",
            projectId: "titancore-87eeb",
            storageBucket: "titancore-87eeb.firebasestorage.app",
            messagingSenderId: "722131400490",
            appId: "1:722131400490:web:a3a54105875a964ca11053"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const donorRef = ref(db, 'stats/donorCount');

        let firstLoad = true;

        onValue(donorRef, (snapshot) => {
            const val = snapshot.val() || 1240;
            document.getElementById('supply-count').innerText = val.toString().padStart(6, '0');
            if (!firstLoad) {
                triggerEnergyEffect();
            }
            firstLoad = false;
        });

        function triggerEnergyEffect() {
            const flash = document.getElementById('flash-effect');
            flash.style.opacity = "0.4";
            setTimeout(() => flash.style.opacity = "0", 150);
            aiLog("SISTEMA: Energ√≠a recibida. Sincronizando nube...");
            speakIA("Bienvenido. Con tu donaci√≥n arrancas el motor y cuidas el ahorro de energ√≠a en tu hogar en el propio ecosistema global.");
        }

        window.simulateDonation = function() {
            runTransaction(donorRef, (count) => (count || 1240) + 1);
        };
    </script>

    <script>
        let isAudioMuted = false;
        const msgPotencia = "vamos a encender el motor y a probar toda la potencia de este modelo titan!!!";

        function closeManifesto() { document.getElementById('overlay').style.display = 'none'; speakIA(msgPotencia); }
        function toggleAudio() { isAudioMuted = !isAudioMuted; document.getElementById('voice-toggle').innerText = isAudioMuted ? "üîá" : "üîä"; if(isAudioMuted) window.speechSynthesis.cancel(); }
        function aiLog(msg) { const win = document.getElementById('chat-window'); win.innerHTML += `<br>> ${msg}`; win.scrollTop = win.scrollHeight; }
        function aiProcess(val) { if(!val) return; aiLog(`<span style="color:white">USR: ${val}</span>`); document.getElementById('ai-in').value = ''; setTimeout(() => { const res = "Sinton√≠a estable. Analizando par√°metros."; aiLog(res); speakIA(res); }, 600); }
        
        function speakIA(text) {
            if (isAudioMuted || !('speechSynthesis' in window)) return;
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'es-AR';
            msg.rate = 1.0;
            window.speechSynthesis.speak(msg);
        }

        function igniteEngine() {
            const gear = document.getElementById('gear');
            const fill = document.getElementById('temp-fill');
            const percentText = document.getElementById('temp-percent');
            gear.classList.add('spinning');
            let p = 0;
            let startInterval = setInterval(() => {
                p++;
                fill.style.width = p + '%';
                percentText.innerText = `POTENCIA: ${p}%`;
                if(p >= 100) { clearInterval(startInterval); startOscillation(); }
            }, 25);
            speakIA(msgPotencia);
        }

        function startOscillation() {
            const fill = document.getElementById('temp-fill');
            const percentText = document.getElementById('temp-percent');
            setInterval(() => {
                let osc = Math.floor(Math.random() * (100 - 85 + 1)) + 85;
                fill.style.width = osc + '%';
                percentText.innerText = `POTENCIA: ${osc}%`;
            }, 850);
        }
    </script>
</body>
</html>
